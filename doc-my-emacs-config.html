<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-01-02 一 17:32 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>我的emacs配置文档介绍</title>
<meta name="author" content="Zi Liang" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="./css/worg.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">我的emacs配置文档介绍</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org65bbf9f">1. 总体框架</a>
<ul>
<li><a href="#org9a16fa7">1.1. 简介</a></li>
<li><a href="#org83e0e4b">1.2. 文件结构</a></li>
</ul>
</li>
<li><a href="#org192c334">2. 所实现功能</a>
<ul>
<li><a href="#org9be9347">2.1. prog related</a>
<ul>
<li><a href="#org07b56cf">2.1.1. find definition &amp; application</a></li>
<li><a href="#orgb1e5e36">2.1.2. auto insert and my snippets</a></li>
<li><a href="#org65e3d2c">2.1.3. details for some progs</a></li>
</ul>
</li>
<li><a href="#org0767e99">2.2. version control</a></li>
<li><a href="#org95352da">2.3. take notes</a>
<ul>
<li><a href="#org7075d69">2.3.1. insert codes</a></li>
<li><a href="#orga70e113">2.3.2. 运行代码</a></li>
<li><a href="#org6c9fe6b">2.3.3. 插入图片</a></li>
<li><a href="#orgd0e29dc">2.3.4. 格式导出</a></li>
<li><a href="#org5beb867">2.3.5. 发布博客</a></li>
</ul>
</li>
<li><a href="#org7685acd">2.4. ssh, with tramp</a></li>
<li><a href="#org17ace33">2.5. listen to music</a></li>
<li><a href="#orgfee8d33">2.6. play games</a></li>
<li><a href="#org18eb1fa">2.7. English related</a>
<ul>
<li><a href="#orgf201ca1">2.7.1. 查单词</a></li>
<li><a href="#org5d80410">2.7.2. 英语自动补全</a></li>
<li><a href="#orgccc60fe">2.7.3. 英语拼写检查</a></li>
</ul>
</li>
<li><a href="#orgbe26cf9">2.8. 输入法</a></li>
</ul>
</li>
<li><a href="#org73dbbb1">3. 附录：键位表</a>
<ul>
<li><a href="#orgb8bdae1">3.1. evil相关的leader键位表</a></li>
<li><a href="#orga2abe1e">3.2. snippets</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org65bbf9f" class="outline-2">
<h2 id="org65bbf9f"><span class="section-number-2">1.</span> 总体框架</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org9a16fa7" class="outline-3">
<h3 id="org9a16fa7"><span class="section-number-3">1.1.</span> 简介</h3>
<div class="outline-text-3" id="text-1-1">
<p>
本文档汇总并总结我所使用的emacs配置的基本用法,并会进行不间断地更新。
</p>

<p>
由于我希望在多个平台上使用他，其中，又因受限于论文写作、画图、QQ、微信等工作流的需求，本emacs配置不得不支持windows系统上的使用。
</p>

<p>
由于在服务器端写代码的需求，需要维持在linux终端上的使用。由于在笔记本电脑上使用linux的需求，还需要维持linux桌面端的使用。因而总体上需要以下几部分：
</p>

<ol class="org-ol">
<li>在windows系统上，主要功能需求包括和两部分;</li>
<li>在linux服务器上，具有良好的python语法支持；</li>
<li>在windows系统和linux系统下，最好拥有以下支持：
<ol class="org-ol">
<li>邮件处理</li>
<li>C++、C语法支持；</li>
<li>各种编程语言的开箱即用；</li>
</ol></li>
</ol>

<p>
针对于以上问题，目前所采用的折中解决方案是：采用win10系统+ WSL2，所有的emacs配置均建立在linux系统上进行配置，同时为wsl2撰写一些函数，以提供更加方便的系统交互。
通过以上方式，我整合了我的工作流，实现上述需求：
</p>

<ol class="org-ol">
<li>通过在wsl2上（目前采用ubuntu20.04）通过脚本安装二进制软件，将emacs作为前端，实现emacs中的各项基本功能；</li>
<li>通过tramp，一个ssh软件，来自动管理连接远程服务器；</li>
<li>通过执行powershell命令，来更好地辅助wsl和windows系统之间的交流；</li>
</ol>

<p>
同时，我还为emacs的使用准备了两种环境：
</p>
<ol class="org-ol">
<li>TUI（Text User Inferface），通过在windows的官方应用市场下载terminal，可以直接建立对wsl的访问。我常常在terminal中启动emacs，这占据了我工作中的绝大多数时间。比起GUI环境，terminal有以下优点：
<ol class="org-ol">
<li>速度更快，我的emacs很需要高效率，正常用着用着，就会开很多buffer，如果还打开lsp这种服务，那么就更复杂了；</li>
<li>tui看起来更好看；</li>
<li>tui更加纯粹，因为绝大多数时候，我都是在coding；</li>
</ol></li>
<li>GUI环境，win11可以支持WSL下的原生GUI，不过很可惜，我工位的电脑在硬件上无法支持win11，所以我只能使用win10，而在win10中，我采用mobaxterm，一个开源的ssh连接软件，来进行GUI映射。
mobaxterm自带x11，在终端键入emacs，就可以产生一个gui版本的emacs了。使用GUI的方式有以下优点：
<ol class="org-ol">
<li>支持图片，如此在写博客时，可以内置现实图片；在写latex时，可以试试查看产生的pdf（tui不行）；在python科研绘图时，也可以直接display得到对应的结果；</li>
<li>鼠标使用。gui支持使用鼠标，这在拼写检查、绘图等事情上有一定用途；</li>
<li>更多的theme。有一些theme还是gui比较好看</li>
<li>字体，略过不谈；</li>
<li>没有快捷键缺损的问题。在tui使用时，为emacs定义的快捷键，可能会与终端的快捷键发生冲突。而我至今没找到怎么把terminal中所有的快捷键都关掉……</li>
</ol></li>
</ol>
</div>
</div>

<div id="outline-container-org83e0e4b" class="outline-3">
<h3 id="org83e0e4b"><span class="section-number-3">1.2.</span> 文件结构</h3>
<div class="outline-text-3" id="text-1-2">
<p>
我所采用的是最经典的emacs配置结构。
</p>

<p>
我们知道，emacs通过访问 \~/emacs.d/init.el 来执行emacs配置的加载。而init文件，则通过顺序加载各个子文件，来实现对整个emacs的加载。
</p>

<p>
整体的一个tree，可以通过下述代码所述：
</p>

<div class="org-src-container">
<pre class="src src-dot">&#9500;&#9472;&#9472; auto-insert
&#9500;&#9472;&#9472; auto-save-list
&#9500;&#9472;&#9472; collected
&#9500;&#9472;&#9472; doc
&#9474;&#160;&#160; &#9500;&#9472;&#9472; images
&#9474;&#160;&#160; &#9492;&#9472;&#9472; utils-in-windows
&#9500;&#9472;&#9472; elpa
&#9500;&#9472;&#9472; eshell
&#9500;&#9472;&#9472; imdict
&#9500;&#9472;&#9472; lisp
&#9500;&#9472;&#9472; netease-cloud-music
&#9500;&#9472;&#9472; other-files
&#9474;&#160;&#160; &#9500;&#9472;&#9472; easy-collections
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; img
&#9474;&#160;&#160; &#9500;&#9472;&#9472; netease-cloud-music.el
&#9474;&#160;&#160; &#9492;&#9472;&#9472; org-static-blog
&#9500;&#9472;&#9472; pyim
&#9474;&#160;&#160; &#9492;&#9472;&#9472; dcache
&#9500;&#9472;&#9472; quelpa
&#9474;&#160;&#160; &#9492;&#9472;&#9472; melpa
&#9500;&#9472;&#9472; request
&#9500;&#9472;&#9472; rime
&#9474;&#160;&#160; &#9500;&#9472;&#9472; build
&#9474;&#160;&#160; &#9500;&#9472;&#9472; luna_pinyin.userdb
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; lost
&#9474;&#160;&#160; &#9500;&#9472;&#9472; luna_pinyin.userdb.old
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; lost
&#9474;&#160;&#160; &#9500;&#9472;&#9472; terra_pinyin.userdb
&#9474;&#160;&#160; &#9492;&#9472;&#9472; terra_pinyin.userdb.old
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; lost
&#9500;&#9472;&#9472; site-lisp
&#9474;&#160;&#160; &#9492;&#9472;&#9472; emacs-application-framework
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; app
&#9474;&#160;&#160;     &#9474;&#160;&#160; &#9492;&#9472;&#9472; airshare
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; core
&#9474;&#160;&#160;     &#9474;&#160;&#160; &#9492;&#9472;&#9472; js
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; extension
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; img
&#9500;&#9472;&#9472; snippets
&#9474;&#160;&#160; &#9500;&#9472;&#9472; c++-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; c-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; emacs-lisp-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; latex-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; org-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; python-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; rust-mode
&#9474;&#160;&#160; &#9500;&#9472;&#9472; sh-mode
&#9474;&#160;&#160; &#9492;&#9472;&#9472; web-mode
&#9500;&#9472;&#9472; software
&#9500;&#9472;&#9472; transient
&#9492;&#9472;&#9472; url
</pre>
</div>

<p>
其中，other-files是我用来存储那些不需要进行更新，或者自己所写的包的地址；lisp是我的配置地址，剩下的都比较明显，就不再进行介绍了。
</p>
</div>
</div>
</div>

<div id="outline-container-org192c334" class="outline-2">
<h2 id="org192c334"><span class="section-number-2">2.</span> 所实现功能</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org9be9347" class="outline-3">
<h3 id="org9be9347"><span class="section-number-3">2.1.</span> prog related</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org07b56cf" class="outline-4">
<h4 id="org07b56cf"><span class="section-number-4">2.1.1.</span> find definition &amp; application</h4>
</div>

<div id="outline-container-orgb1e5e36" class="outline-4">
<h4 id="orgb1e5e36"><span class="section-number-4">2.1.2.</span> auto insert and my snippets</h4>
</div>

<div id="outline-container-org65e3d2c" class="outline-4">
<h4 id="org65e3d2c"><span class="section-number-4">2.1.3.</span> details for some progs</h4>
</div>
</div>

<div id="outline-container-org0767e99" class="outline-3">
<h3 id="org0767e99"><span class="section-number-3">2.2.</span> version control</h3>
<div class="outline-text-3" id="text-2-2">
<p>
我通过magit去做版本控制，这个东西对新手比较友好。<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup>
</p>

<p>
我没有为git设置快捷键，因为使用不是很多， git有很多低级功能，如add，commit， push，pull等操作，就不赘述了。
</p>

<p>
比较常见的进阶问题是关于diff的，此处先不赘述，后面专门写文章介绍。
</p>
</div>
</div>


<div id="outline-container-org95352da" class="outline-3">
<h3 id="org95352da"><span class="section-number-3">2.3.</span> take notes</h3>
<div class="outline-text-3" id="text-2-3">
<p>
我的笔记通过org mode进行记录，之后发表到我自己的<a href="https://liangzid.github.io/sitemap.html">blog</a>上。发表到博客有利于我自己查看。
</p>

<p>
关于如何使用ORG mode，这应该不是一个问题。我主要对orgmode进行了三个方面的自定义：
</p>
</div>
<div id="outline-container-org7075d69" class="outline-4">
<h4 id="org7075d69"><span class="section-number-4">2.3.1.</span> insert codes</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
相当于写了一点点的语法糖，我把它绑定在了“C-c s i”上，代表 src，input。
</p>

<p>
函数如下：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#35774;&#32622;org&#24555;&#36895;&#25554;&#20837;&#28304;&#20195;&#30721;</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">defun</span> <span style="color: #7ED7E6;">org-insert-src-block</span> <span style="color: #47ba99;">(</span>src-code-type<span style="color: #47ba99;">)</span>
  <span style="color: #a9779c;">"Insert a `</span><span style="color: #ef6787;">SRC-CODE-TYPE</span><span style="color: #a9779c;">' type source code block in org-mode."</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">interactive</span>
   <span style="color: #9d81ba;">(</span><span style="color: #49bdb0;">let</span> (<span style="color: #35BF88;">(</span>src-code-types
          '<span style="color: #eed891;">(</span><span style="color: #cea2ca;">"emacs-lisp"</span> <span style="color: #cea2ca;">"python"</span> <span style="color: #cea2ca;">"C"</span> <span style="color: #cea2ca;">"sh"</span> <span style="color: #cea2ca;">"java"</span> <span style="color: #cea2ca;">"js"</span> <span style="color: #cea2ca;">"clojure"</span> <span style="color: #cea2ca;">"C++"</span> <span style="color: #cea2ca;">"css"</span>
            <span style="color: #cea2ca;">"calc"</span> <span style="color: #cea2ca;">"asymptote"</span> <span style="color: #cea2ca;">"dot"</span> <span style="color: #cea2ca;">"gnuplot"</span> <span style="color: #cea2ca;">"ledger"</span> <span style="color: #cea2ca;">"lilypond"</span> <span style="color: #cea2ca;">"mscgen"</span>
            <span style="color: #cea2ca;">"octave"</span> <span style="color: #cea2ca;">"oz"</span> <span style="color: #cea2ca;">"plantuml"</span> <span style="color: #cea2ca;">"R"</span> <span style="color: #cea2ca;">"sass"</span> <span style="color: #cea2ca;">"screen"</span> <span style="color: #cea2ca;">"sql"</span> <span style="color: #cea2ca;">"awk"</span> <span style="color: #cea2ca;">"ditaa"</span>
            <span style="color: #cea2ca;">"haskell"</span> <span style="color: #cea2ca;">"latex"</span> <span style="color: #cea2ca;">"lisp"</span> <span style="color: #cea2ca;">"matlab"</span> <span style="color: #cea2ca;">"ocaml"</span> <span style="color: #cea2ca;">"org"</span> <span style="color: #cea2ca;">"perl"</span> <span style="color: #cea2ca;">"ruby"</span>
            <span style="color: #cea2ca;">"scheme"</span> <span style="color: #cea2ca;">"sqlite"</span><span style="color: #eed891;">)</span><span style="color: #35BF88;">)</span>)
     (list <span style="color: #35BF88;">(</span>ido-completing-read <span style="color: #cea2ca;">"Source code type: "</span> src-code-types<span style="color: #35BF88;">)</span>)<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">progn</span>
    <span style="color: #9d81ba;">(</span>newline-and-indent<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>insert (format <span style="color: #cea2ca;">"#+BEGIN_SRC %s\n"</span> src-code-type)<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>newline-and-indent<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>insert <span style="color: #cea2ca;">"#+END_SRC\n"</span><span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>previous-line 2<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>org-edit-src-code<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

<span style="color: #635C4A;">;; </span><span style="color: #635C4A;">(message "--------------------begin--------------------")</span>
<span style="color: #635C4A;">;;</span><span style="color: #635C4A;">&#23558;&#20854;&#21152;&#36733;&#22312;&#24555;&#25463;&#38190;&#19978;</span>
<span style="color: #4d9391;">(</span>add-hook 'org-mode-hook
          '<span style="color: #47ba99;">(</span>lambda <span style="color: #9d81ba;">()</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">;; C-TAB for expanding</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">(local-set-key (kbd "C-&lt;tab&gt;")</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">'yas/expand-from-trigger-key)</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">keybinding for editing source code blocks</span>
             <span style="color: #9d81ba;">(</span>local-set-key (kbd <span style="color: #cea2ca;">"C-c s e"</span>)
             'org-edit-src-code<span style="color: #9d81ba;">)</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">keybinding for inserting code blocks</span>
             <span style="color: #9d81ba;">(</span>local-set-key (kbd <span style="color: #cea2ca;">"C-c s i"</span>) 'org-insert-src-block <span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

</pre>
</div>

<p>
对的，我上面的这段代码，就是用这个配置插入的……
</p>
</div>
</div>

<div id="outline-container-orga70e113" class="outline-4">
<h4 id="orga70e113"><span class="section-number-4">2.3.2.</span> 运行代码</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
使用如下配置：
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #635C4A;">;;</span><span style="color: #635C4A;">code running</span>
<span style="color: #4d9391;">(</span>org-babel-do-load-languages
     'org-babel-load-languages
     '<span style="color: #47ba99;">(</span><span style="color: #9d81ba;">(</span>emacs-lisp . t<span style="color: #9d81ba;">)</span>
       <span style="color: #9d81ba;">(</span>ditaa . t<span style="color: #9d81ba;">)</span>
       <span style="color: #9d81ba;">(</span>python . t<span style="color: #9d81ba;">)</span>
       <span style="color: #635C4A;">;;</span><span style="color: #635C4A;">(sh . t)</span>
       <span style="color: #9d81ba;">(</span>latex . t<span style="color: #9d81ba;">)</span>
       <span style="color: #9d81ba;">(</span>plantuml . t<span style="color: #9d81ba;">)</span>
       <span style="color: #9d81ba;">(</span>R . t<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-plantuml-jar-path
     <span style="color: #47ba99;">(</span>expand-file-name <span style="color: #cea2ca;">"~/.emacs.d/software/plantuml.jar"</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>


<span style="color: #635C4A;">;;</span><span style="color: #635C4A;">code&#25191;&#34892;&#20813;&#24212;&#31572;&#65288;Eval code without confirm&#65289;</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-confirm-babel-evaluate nil<span style="color: #4d9391;">)</span>
</pre>
</div>

<p>
值得注意的是，我还对plantuml特殊照顾。这是为了画UML图的jar包。我用它是为了能够在某些时候画一些简单的图示。
</p>

<p>
比如下面的代码：
</p>

<div class="org-src-container">
<pre class="src src-org">
#+begin_src plantuml :file ./img/202201071111.png
(a)--&gt;(b)
(b)--&gt;(c)
(c)--&gt; (d)
(d)--&gt; (a)
</pre>
</div>

<p>
#+end_src
</p>

<p>
当我使用“C-c C-c”时，就可以自动插入代码进去了.
</p>


<div id="orgb24068f" class="figure">
<p><img src="./img/testuml.png" alt="testuml.png" />
</p>
</div>


<p>
当然，正常的编程语言都可以理解，只要你有解释器。比如 python：
</p>


<div class="org-src-container">
<pre class="src src-python">
<span style="color: #49bdb0;">def</span> <span style="color: #7ED7E6;">helloword</span><span style="color: #4d9391;">()</span>:
    <span style="color: #49bdb0;">return</span> <span style="color: #cea2ca;">"helloword"</span>

<span style="color: #49bdb0;">return</span> helloword<span style="color: #4d9391;">()</span>
<span style="color: #635C4A;"># </span><span style="color: #635C4A;">return 1+1</span>
</pre>
</div>


<div id="orge8e7169" class="figure">
<p><img src="./images/screenshot_20220107_214119.png" alt="screenshot_20220107_214119.png" /> 
</p>
</div>
</div>
</div>

<div id="outline-container-org6c9fe6b" class="outline-4">
<h4 id="org6c9fe6b"><span class="section-number-4">2.3.3.</span> 插入图片</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
这个是21世纪记笔记的硬需求。由于我是用的wsl，所以在拥有mac这种电脑之前，我需要解决的一个核心问题是：如何将windows里复制的图片进行粘贴。我把这个流程抽象的很简单，主要是借助powershell。
</p>

<p>
这个流程是，我通过C-M-a (qq的截图键) 和 M-a (微信的截图键) 选取我希望截图的部分，然后通过SPC-s-i，插入我截取完成的那部分图片，之后，对应的图片会被保存在当前文件所处地区的imgs文件夹中，并基于插入时间产生一个文件。
</p>


<div id="org172b046" class="figure">
<p><img src="./images/screenshot_20220107_215239.png" alt="screenshot_20220107_215239.png" /> 
</p>
</div>

<p>
比如上面这张图片，就是我去那个文件夹下，打开了一个目录之后而得到的。
</p>

<p>
这一部分的配置如下：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4d9391;">(</span><span style="color: #49bdb0;">defun</span> <span style="color: #7ED7E6;">my-yank-image-from-win-clipboard-through-powershell</span><span style="color: #47ba99;">()</span>
  <span style="color: #a9779c;">"to simplify the logic, use c:/Users/Public as temporary directoy, and move it into current directoy"</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">interactive</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">let*</span> <span style="color: #9d81ba;">(</span>(powershell <span style="color: #cea2ca;">"/mnt/c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe"</span>)
         (file-name <span style="color: #35BF88;">(</span>format-time-string <span style="color: #cea2ca;">"screenshot_%Y%m%d_%H%M%S.png"</span><span style="color: #35BF88;">)</span>)
         <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">(file-path-powershell (concat "c:/Users/\$env:USERNAME/" file-name))</span>
         (file-path-wsl <span style="color: #35BF88;">(</span>concat <span style="color: #cea2ca;">"./images/"</span> file-name<span style="color: #35BF88;">)</span>)
         <span style="color: #9d81ba;">)</span>
    <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">(shell-command (concat powershell " -command \"(Get-Clipboard -Format Image).Save(\\\"C:/Users/\\$env:USERNAME/" file-name "\\\")\""))</span>
    <span style="color: #9d81ba;">(</span>shell-command (concat powershell <span style="color: #cea2ca;">" -command \"(Get-Clipboard -Format Image).Save(\\\"C:/Users/Public/"</span> file-name <span style="color: #cea2ca;">"\\\")\""</span>)<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>rename-file (concat <span style="color: #cea2ca;">"/mnt/c/Users/Public/"</span> file-name) file-path-wsl<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>insert (concat <span style="color: #cea2ca;">"[[file:"</span> file-path-wsl <span style="color: #cea2ca;">"]]"</span>)<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span>message <span style="color: #cea2ca;">"insert DONE."</span><span style="color: #9d81ba;">)</span>
    <span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>
</pre>
</div>

<p>
其基本原理是：将复制的图片保存在本地，然后移动到目标文件夹下，并在当前光标下插入。
</p>

<p>
如果你在windows下用emacs，我这里有一套完整的方案，通过C-M-Y便可以开启截图！
配置如下：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #635C4A;">;; </span><span style="color: #635C4A;">"C:\Program Files\IrfanView\i_view64.exe"</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">defun</span> <span style="color: #7ED7E6;">my-screen-capture</span> <span style="color: #47ba99;">()</span>
  <span style="color: #a9779c;">"Take a screenshot into a unique-named file in the current buffer file</span>
<span style="color: #a9779c;">   directory and insert a link to this file."</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">interactive</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span>lower-frame<span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">let</span> <span style="color: #9d81ba;">(</span>(capture-name <span style="color: #35BF88;">(</span>concat
                       <span style="color: #eed891;">(</span>format-time-string <span style="color: #cea2ca;">"%Y%m%d%H%M%S"</span><span style="color: #eed891;">)</span> <span style="color: #cea2ca;">".png"</span><span style="color: #35BF88;">)</span>)
        (capture-save-path <span style="color: #35BF88;">(</span>concat
                            <span style="color: #eed891;">(</span>file-name-directory buffer-file-name<span style="color: #eed891;">)</span> <span style="color: #cea2ca;">"images/"</span><span style="color: #35BF88;">)</span>)<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span><span style="color: #49bdb0;">setq</span> capture-file (concat capture-save-path capture-name)<span style="color: #9d81ba;">)</span>
    <span style="color: #9d81ba;">(</span><span style="color: #49bdb0;">if</span> *is-windows*
        (<span style="color: #35BF88;">(</span><span style="color: #49bdb0;">setq</span> command <span style="color: #eed891;">(</span>concat <span style="color: #cea2ca;">"\"C://Program Files//IrfanView//i_view64.exe\"  /capture=4 /dpi=(300,300) /convert="</span>
                               <span style="color: #cea2ca;">(</span>replace-regexp-in-string <span style="color: #cea2ca;">"/"</span> <span style="color: #cea2ca;">"\\\\"</span> capture-file<span style="color: #cea2ca;">)</span><span style="color: #eed891;">)</span><span style="color: #35BF88;">)</span>
         <span style="color: #35BF88;">(</span>shell-command command<span style="color: #35BF88;">)</span>)
      (call-process-shell-command <span style="color: #cea2ca;">"scrot"</span> nil nil nil nil <span style="color: #cea2ca;">"-s"</span> capture-file)
      <span style="color: #9d81ba;">)</span>

    <span style="color: #9d81ba;">(</span>insert (concat
             <span style="color: #cea2ca;">"[[file:./images/"</span> capture-name <span style="color: #cea2ca;">"]]"</span>)<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span>
  <span style="color: #4d9391;">)</span>

<span style="color: #4d9391;">(</span>define-key org-mode-map <span style="color: #47ba99;">(</span>kbd <span style="color: #cea2ca;">"C-M-Y"</span><span style="color: #47ba99;">)</span> 'my-screen-capture<span style="color: #4d9391;">)</span>
</pre>
</div>

<p>
除此之外还有一些别的办法，但是似乎对WSL没用，没用所以我就用不到。
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq-default</span> org-download-heading-lvl nil<span style="color: #4d9391;">)</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq-default</span> org-download-image-dir <span style="color: #cea2ca;">"./img"</span><span style="color: #4d9391;">)</span> <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#25226;&#22270;&#29255;&#20445;&#23384;&#22312; org &#25991;&#26723;&#25152;&#22312;&#30446;&#24405;&#30340; img &#23376;&#30446;&#24405;&#19979;</span>

<span style="color: #4d9391;">(</span>add-hook 'org-mode-hook
          #'org-download-enable<span style="color: #4d9391;">)</span>

<span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#35774;&#32622;&#25554;&#20837;&#22270;&#29255;&#30340;&#24555;&#25463;&#38190;</span>
<span style="color: #635C4A;">;; </span><span style="color: #635C4A;">(after-load 'org-download</span>
  <span style="color: #4d9391;">(</span>define-key org-mode-map <span style="color: #47ba99;">(</span>kbd <span style="color: #cea2ca;">"C-c C-x s"</span><span style="color: #47ba99;">)</span> 'org-download-screenshot<span style="color: #4d9391;">)</span> <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#25554;&#20837;&#25130;&#22270;</span>
<span style="color: #4d9391;">(</span>define-key org-mode-map <span style="color: #47ba99;">(</span>kbd <span style="color: #cea2ca;">"C-c C-x y"</span><span style="color: #47ba99;">)</span> 'org-download-yank<span style="color: #4d9391;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd0e29dc" class="outline-4">
<h4 id="orgd0e29dc"><span class="section-number-4">2.3.4.</span> 格式导出</h4>
<div class="outline-text-4" id="text-2-3-4">
<p>
这个是org mode的默认功能，我对它做了增强，主要是确定模板和支持中文。
</p>

<p>
默认命令是C-c C-e，比如对于这个文件，我可以通过该命令得到导出页面。
</p>


<div id="orgd640c33" class="figure">
<p><img src="./images/screenshot_20220107_220217.png" alt="screenshot_20220107_220217.png" /> 
</p>
</div>

<p>
对于上述命令，我用到的最多的，是通过org导出word相关格式，html格式，和latex支持的PDF格式。除此之外还有epub游戏。
</p>

<p>
其中最需要配置的是latex支持的PDF格式，配置方式如下：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#20351;&#29992;xelatex&#65292;&#37197;&#21512;&#24403;&#21069;org&#25991;&#20214;&#26368;&#24320;&#22987;&#30340;&#37197;&#32622;&#26469;&#27491;&#24120;&#36755;&#20986;&#20013;&#25991;</span>
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#36825;&#31867;&#31508;&#35760;&#22522;&#26412;&#19981;&#21487;&#33021;&#26159;&#20840;&#33521;&#25991;&#65292;&#25152;&#20197;&#23601;&#23433;&#24515;&#29992;xelatex&#31639;&#20102;</span>
  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-latex-pdf-process '<span style="color: #47ba99;">(</span><span style="color: #cea2ca;">"xelatex -file-line-error -interaction nonstopmode %f"</span>
                                <span style="color: #cea2ca;">"bibtex %b"</span>
                                <span style="color: #cea2ca;">"xelatex -file-line-error -interaction nonstopmode %f"</span>
                                <span style="color: #cea2ca;">"xelatex -file-line-error -interaction nonstopmode %f"</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#29983;&#25104;PDF&#21518;&#28165;&#29702;&#36741;&#21161;&#25991;&#20214;</span>
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">https://answer-id.com/53623039</span>
  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-latex-logfiles-extensions
    <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">quote</span> <span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"lof"</span> <span style="color: #cea2ca;">"lot"</span> <span style="color: #cea2ca;">"tex"</span> <span style="color: #cea2ca;">"tex~"</span> <span style="color: #cea2ca;">"aux"</span>
      <span style="color: #cea2ca;">"idx"</span> <span style="color: #cea2ca;">"log"</span> <span style="color: #cea2ca;">"out"</span> <span style="color: #cea2ca;">"toc"</span> <span style="color: #cea2ca;">"nav"</span>
      <span style="color: #cea2ca;">"snm"</span> <span style="color: #cea2ca;">"vrb"</span> <span style="color: #cea2ca;">"dvi"</span> <span style="color: #cea2ca;">"fdb_latexmk"</span>
      <span style="color: #cea2ca;">"blg"</span> <span style="color: #cea2ca;">"brf"</span> <span style="color: #cea2ca;">"fls"</span> <span style="color: #cea2ca;">"entoc"</span> <span style="color: #cea2ca;">"ps"</span>
      <span style="color: #cea2ca;">"spl"</span> <span style="color: #cea2ca;">"bbl"</span> <span style="color: #cea2ca;">"xdv"</span><span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#22270;&#29255;&#40664;&#35748;&#23485;&#24230;</span>
  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-image-actual-width '<span style="color: #47ba99;">(</span>300<span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-export-with-sub-superscripts nil<span style="color: #4d9391;">)</span>

  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#19981;&#35201;&#33258;&#21160;&#21019;&#24314;&#22791;&#20221;&#25991;&#20214;</span>
  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> make-backup-files nil<span style="color: #4d9391;">)</span>

  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">elegantpaper.cls</span>
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">https://github.com/ElegantLaTeX/ElegantPaper/blob/master/elegantpaper.cls</span>
  <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">with-eval-after-load</span> 'ox-latex
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">http://orgmode.org/worg/org-faq.html#using-xelatex-for-pdf-export</span>
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">latexmk runs pdflatex/xelatex (whatever is specified) multiple times</span>
  <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">automatically to resolve the cross-references.</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">setq</span> org-latex-pdf-process '<span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"latexmk -xelatex -quiet -shell-escape -f %f"</span><span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">setq</span> org-latex-listings t<span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span>add-to-list 'org-latex-classes
                '<span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"elegantpaper"</span>
                  <span style="color: #cea2ca;">"\\documentclass[lang=cn]{elegantpaper}</span>
<span style="color: #cea2ca;">                  [NO-DEFAULT-PACKAGES]</span>
<span style="color: #cea2ca;">                  [PACKAGES]</span>
<span style="color: #cea2ca;">                  [EXTRA]"</span>
                  (<span style="color: #cea2ca;">"\\section{%s}"</span> . <span style="color: #cea2ca;">"\\section*{%s}"</span>)
                  (<span style="color: #cea2ca;">"\\subsection{%s}"</span> . <span style="color: #cea2ca;">"\\subsection*{%s}"</span>)
                  (<span style="color: #cea2ca;">"\\subsubsection{%s}"</span> . <span style="color: #cea2ca;">"\\subsubsection*{%s}"</span>)
                  (<span style="color: #cea2ca;">"\\paragraph{%s}"</span> . <span style="color: #cea2ca;">"\\paragraph*{%s}"</span>)
                  (<span style="color: #cea2ca;">"\\subparagraph{%s}"</span> . <span style="color: #cea2ca;">"\\subparagraph*{%s}"</span>)<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span>
  <span style="color: #4d9391;">)</span>

</pre>
</div>

<p>
这个东西需要配置开头文件，通过使用 <code>#+latex_class: elegantpaper</code> 的前缀。
</p>

<p>
其中的elegantpaper，是一个latex中的sty文件。
</p>
</div>
</div>

<div id="outline-container-org5beb867" class="outline-4">
<h4 id="org5beb867"><span class="section-number-4">2.3.5.</span> 发布博客</h4>
<div class="outline-text-4" id="text-2-3-5">
<p>
通过org-publish进行绑定，其配置如下，其中敏感信息一竟被删除：
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4d9391;">(</span><span style="color: #49bdb0;">require</span> '<span style="color: #ef6787;">ox-publish</span><span style="color: #4d9391;">)</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> org-publish-project-alist
      '<span style="color: #47ba99;">(</span>
         <span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"blog-notes"</span>
            <span style="color: #53E6B5;">:base-directory</span> <span style="color: #cea2ca;">"~/liangzid.github.io/notes/"</span>
             <span style="color: #53E6B5;">:base-extension</span> <span style="color: #cea2ca;">"org"</span>
             <span style="color: #53E6B5;">:publishing-directory</span> <span style="color: #cea2ca;">"~/liangzid.github.io/"</span>
             <span style="color: #53E6B5;">:recursive</span> t
             <span style="color: #53E6B5;">:htmlized-source</span> t
             <span style="color: #53E6B5;">:html-extension</span> <span style="color: #cea2ca;">"html"</span>
             <span style="color: #53E6B5;">:body-only</span> t
             <span style="color: #53E6B5;">:table-of-contents</span> t
             <span style="color: #53E6B5;">:publishing-function</span> org-html-publish-to-html
             <span style="color: #53E6B5;">:headline-levels</span> 5
             <span style="color: #53E6B5;">:auto-preamble</span> t
             <span style="color: #53E6B5;">:section-numbers</span> t
             <span style="color: #53E6B5;">:author</span> <span style="color: #cea2ca;">"LiangZi"</span>
             <span style="color: #53E6B5;">:email</span> <span style="color: #cea2ca;">"liangzid@stu.xjtu.edu.cn"</span>
             <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">:exclude-tags "noshow"</span>
             <span style="color: #53E6B5;">:auto-sitemap</span> t                  <span style="color: #635C4A;">; </span><span style="color: #635C4A;">&#33258;&#21160;&#29983;&#25104; sitemap.org &#25991;&#20214;</span>
             <span style="color: #53E6B5;">:sitemap-filename</span> <span style="color: #cea2ca;">"sitemap.org"</span>  <span style="color: #635C4A;">; </span><span style="color: #635C4A;">... call it sitemap.org (it's the default)...</span>
             <span style="color: #53E6B5;">:sitemap-title</span> <span style="color: #cea2ca;">"Sitemap"</span>         <span style="color: #635C4A;">; </span><span style="color: #635C4A;">... with title '</span><span style="color: #ef6787;">Sitemap</span><span style="color: #635C4A;">'.</span>
             <span style="color: #53E6B5;">:sitemap-sort-files</span> anti-chronologically
             <span style="color: #53E6B5;">:sitemap-file-entry-format</span> <span style="color: #cea2ca;">"%d %t"</span>
             <span style="color: #53E6B5;">:html-head</span> <span style="color: #cea2ca;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://liangzid.github.io/notes/css/worg.css\"/&gt;"</span>

         <span style="color: #9d81ba;">)</span>
         <span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"blog-static"</span>
             <span style="color: #53E6B5;">:base-directory</span> <span style="color: #cea2ca;">"~/liangzid.github.io/notes/"</span>
             <span style="color: #53E6B5;">:base-extension</span> <span style="color: #cea2ca;">"css</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">js</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">png</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">jpg</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">gif</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">pdf</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">mp3</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">ogg</span><span style="color: #91f368;">\\</span><span style="color: #91f368;">|</span><span style="color: #cea2ca;">swf"</span>
             <span style="color: #53E6B5;">:publishing-directory</span> <span style="color: #cea2ca;">"~/liangzid.github.io/"</span>
             <span style="color: #53E6B5;">:html-head</span> <span style="color: #cea2ca;">"&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"https://liangzid.github.io/notes/css/worg.css\"/&gt;"</span>
             <span style="color: #53E6B5;">:recursive</span> t
             <span style="color: #53E6B5;">:publishing-function</span> org-publish-attachment
          <span style="color: #9d81ba;">)</span>
         <span style="color: #9d81ba;">(</span><span style="color: #cea2ca;">"blog"</span> <span style="color: #53E6B5;">:components</span> (<span style="color: #cea2ca;">"blog-notes"</span> <span style="color: #cea2ca;">"blog-static"</span>)<span style="color: #9d81ba;">)</span>

        <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#25226;&#21508;&#37096;&#20998;&#30340;&#37197;&#32622;&#25991;&#20214;&#20889;&#21040;&#36825;&#37324;&#38754;&#26469;</span>

        <span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

</pre>
</div>

<p>
这里的css配置问题，我还没有解决。
</p>
</div>
</div>
</div>

<div id="outline-container-org7685acd" class="outline-3">
<h3 id="org7685acd"><span class="section-number-3">2.4.</span> ssh, with tramp</h3>
<div class="outline-text-3" id="text-2-4">
<p>
我之前使用vscode来连接远程服务器写代码，但是vscode比较麻烦，常常需要连接多次，多次输入密码。
除此之外，我面对vscode等工具会产生一种畏惧心态——因为太复杂了，没有emacs简洁简单。
</p>

<p>
后来，我转向了终端，即在服务器上安装emacs，然后ssh远程过去，然后在终端打开emacs使用。
后来发现，其实emacs竟然也自带ssh工具，这就是tramp。
</p>

<p>
我其实挺喜欢tramp的，这个东西使用起来很简单，并且记录一次密码之后，就可以永远快速进入了！
</p>

<p>
假如说断网了，也就是我和服务器失去了连接，没关系，我在本地的buffer上也会有一份副本。当出现多个写而产生的冲突时，会有一个冲突报警。
</p>

<p>
我主要有若干个实验室的服务器帐号，分别属于不同的ip上（当然，必须是服务器内网访问），所以我写了一个简单的函数，这样我只需要运行SPC-服务器序号，就可以访问他们了！
</p>

<p>
函数写的十分简单，下面仅以其中一个为例：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #4d9391;">(</span><span style="color: #49bdb0;">defun</span> <span style="color: #7ED7E6;">ssh-connect-41</span> <span style="color: #47ba99;">()</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">interactive</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span>counsel-find-file <span style="color: #cea2ca;">"/ssh:username@XXX.XXX.XXX.XXX:/home/username/liangzi_need_smile"</span><span style="color: #47ba99;">)</span>
  <span style="color: #4d9391;">)</span>
</pre>
</div>

<p>
关于快捷键绑定，后面会统一介绍。
</p>
</div>
</div>

<div id="outline-container-org17ace33" class="outline-3">
<h3 id="org17ace33"><span class="section-number-3">2.5.</span> listen to music</h3>
<div class="outline-text-3" id="text-2-5">
<p>
是的，还可以听音乐。不过我没有这个习惯。现在的音乐多不合我的耳，我也不喜欢版权文化，因此我已经两年多不怎么听歌了。
</p>

<p>
可以通过我的<a href="https://gitee.com/18842378119/a.emacs.d">仓库</a>中other-files中 <code>netease-cloud-music.el</code> 文件夹获取听音乐功能。此处不赘述。
</p>
</div>
</div>

<div id="outline-container-orgfee8d33" class="outline-3">
<h3 id="orgfee8d33"><span class="section-number-3">2.6.</span> play games</h3>
<div class="outline-text-3" id="text-2-6">
<p>
略。
</p>
</div>
</div>
<div id="outline-container-org18eb1fa" class="outline-3">
<h3 id="org18eb1fa"><span class="section-number-3">2.7.</span> English related</h3>
<div class="outline-text-3" id="text-2-7">
<p>
我的英语需求，主要包括：在阅读别人的文档时，提供查单词功能；在自己进行写作时，能够提供一些单词辅助，以及拼写检查。
</p>
</div>
<div id="outline-container-orgf201ca1" class="outline-4">
<h4 id="orgf201ca1"><span class="section-number-4">2.7.1.</span> 查单词</h4>
<div class="outline-text-4" id="text-2-7-1">
<p>
我是用的是 youdao-dictionary 这个package，我把它绑定在快捷键C-c y上。我发现这个package很好用，支持当前position单词的翻译，以及对选中文本序列的翻译。
</p>

<p>
配置较为简单：
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">use-package</span> <span style="color: #ef6787;">youdao-dictionary</span>
  <span style="color: #53E6B5;">:config</span>
  <span style="color: #47ba99;">(</span>global-set-key <span style="color: #9d81ba;">(</span>kbd <span style="color: #cea2ca;">"C-c y"</span><span style="color: #9d81ba;">)</span> 'youdao-dictionary-search-at-point+<span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org5d80410" class="outline-4">
<h4 id="org5d80410"><span class="section-number-4">2.7.2.</span> 英语自动补全</h4>
<div class="outline-text-4" id="text-2-7-2">
<p>
使用lazycat的english helper，由于这个软件早就停止更新了，所以我也放在了other-files里面。
配置如下：
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">require</span> '<span style="color: #ef6787;">company-english-helper</span><span style="color: #4d9391;">)</span>
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">setq</span> company-english-helper-active-p nil<span style="color: #4d9391;">)</span>
<span style="color: #4d9391;">(</span>global-set-key <span style="color: #47ba99;">(</span>kbd <span style="color: #cea2ca;">"C-c e"</span><span style="color: #47ba99;">)</span> 'toggle-company-english-helper<span style="color: #4d9391;">)</span>

</pre>
</div>

<p>
不要忘记load-path
</p>
</div>
</div>



<div id="outline-container-orgccc60fe" class="outline-4">
<h4 id="orgccc60fe"><span class="section-number-4">2.7.3.</span> 英语拼写检查</h4>
<div class="outline-text-4" id="text-2-7-3">
<p>
当我写论文时，这个功能很重要。
</p>

<p>
我主要使用了两种check工具，一个是ispell，一个是flyspell。我不是特别了解这儿这的区别和联系，但是感觉flyspell更加复杂一点，同时我喜欢的是简单的东西。首先介绍ispell。ispell显然，也是linux下某拼写检查工具aspell的emacs前端，直接M-x运行即可。
</p>

<p>
和大多数GNU工具一样，其使用很简单，当你打开之后，它便会一个个的让你审阅那些单词，并为每一个单词提供可替换的选项。通过这种方式，就可以实现全文的一个拼写检查了。
</p>

<p>
另一个工具是flyspell，据说功能更加强大，当你打开这个mode之后，他会将所有有问题的word下标发红。我一直没学明白怎么进行最基本的correct，所以这个工具游戏地方 使用我就不得而知了。
</p>
</div>
</div>
</div>

<div id="outline-container-orgbe26cf9" class="outline-3">
<h3 id="orgbe26cf9"><span class="section-number-3">2.8.</span> 输入法</h3>
<div class="outline-text-3" id="text-2-8">
<p>
emacs也自带了一些输入法，来应对一些极端情况。比如我现在使用的wsl，如果我通过X11打开，那么就需要这个子系统配置输入法，否则就无法输入中文，在这种情况下，windows系统默认的输入法是无法使用的。
</p>

<p>
我为我的emacs配置提供了两种输入法，一种是pyim，这种输入法是elisp实现的，所以不需要额外安装任何软件，可靠性很强。但是确定就是，输入法不太好用……另一种方式是，安装不需要折腾的输入法后端于linux中，并在emacs中提供对应的前端。我目前主要使用这一种方案，也就是狗哥所给出的rime前端。我的配置参考的是lazycat的博客，如下：
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="color: #4d9391;">(</span><span style="color: #49bdb0;">use-package</span> <span style="color: #ef6787;">rime</span>
  <span style="color: #53E6B5;">:init</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">setq</span> rime-posframe-properties
        <span style="color: #9d81ba;">(</span>list <span style="color: #53E6B5;">:background-color</span> <span style="color: #cea2ca;">"#333333"</span>
            <span style="color: #53E6B5;">:foreground-color</span> <span style="color: #cea2ca;">"#dcdccc"</span>
            <span style="color: #53E6B5;">:internal-border-width</span> 10<span style="color: #9d81ba;">)</span><span style="color: #47ba99;">)</span>
  <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">setq</span> default-input-method <span style="color: #cea2ca;">"rime"</span>
        rime-show-candidate 'posframe<span style="color: #47ba99;">)</span>
  <span style="color: #53E6B5;">:custom</span>
  <span style="color: #47ba99;">(</span>default-input-method <span style="color: #cea2ca;">"rime"</span><span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span>
</pre>
</div>


<p>
效果如下图所示
</p>


<div id="org220e3f9" class="figure">
<p><img src="./images/screenshot_20220108_104821.png" alt="screenshot_20220108_104821.png" />
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org73dbbb1" class="outline-2">
<h2 id="org73dbbb1"><span class="section-number-2">3.</span> 附录：键位表</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgb8bdae1" class="outline-3">
<h3 id="orgb8bdae1"><span class="section-number-3">3.1.</span> evil相关的leader键位表</h3>
<div class="outline-text-3" id="text-3-1">
<p>
我直接把evil部分的设置拉过来，并进行简单的解释。
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #635C4A;">;;; </span><span style="color: #635C4A;">&#20197;&#19979;&#25152;&#26377;&#30340;&#38190;&#20301;&#65292;leader&#38190;&#37117;&#26159;&#31354;&#26684;&#12290;</span>

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">manager for file and buffer.</span>
 <span style="color: #cea2ca;">"xs"</span> 'save-buffer  
 <span style="color: #cea2ca;">"xf"</span> 'find-file
 <span style="color: #cea2ca;">"xr"</span> 'recentf-open-files
 <span style="color: #cea2ca;">"xb"</span> 'switch-to-buffer
 <span style="color: #cea2ca;">"xk"</span> 'kill-buffer
 <span style="color: #cea2ca;">"xc"</span> 'save-buffers-kill-terminal
 <span style="color: #cea2ca;">"bb"</span> <span style="color: #4d9391;">(</span><span style="color: #49bdb0;">lambda</span> <span style="color: #47ba99;">()</span> <span style="color: #47ba99;">(</span><span style="color: #49bdb0;">interactive</span><span style="color: #47ba99;">)</span> <span style="color: #47ba99;">(</span>switch-to-buffer nil<span style="color: #47ba99;">)</span><span style="color: #4d9391;">)</span> <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">switch to last buffer.</span>
 <span style="color: #cea2ca;">"jj"</span> 'scroll-other-window
 <span style="color: #cea2ca;">"kk"</span> 'scroll-other-window-up
 <span style="color: #cea2ca;">"x0"</span> 'delete-window
 <span style="color: #cea2ca;">"x1"</span> 'delete-other-windows
 <span style="color: #cea2ca;">"x2"</span> 'split-window-below
 <span style="color: #cea2ca;">"x3"</span> 'split-window-right

 <span style="color: #cea2ca;">"hf"</span> 'counsel-describe-function 
 <span style="color: #cea2ca;">"hv"</span> 'counsel-describe-variable
 <span style="color: #cea2ca;">"hk"</span> 'describe-key
 <span style="color: #cea2ca;">"hm"</span> 'describe-mode

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">code navigation.</span>
 <span style="color: #cea2ca;">"sh"</span> 'highlight-symbol
 <span style="color: #cea2ca;">"sr"</span> 'highlight-symbol-query-replace
 <span style="color: #cea2ca;">"sn"</span> 'highlight-symbol-nav-mode <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#20351;&#29992;M-n,p&#36827;&#34892;&#19978;&#19979;&#23548;&#33322;</span>

 <span style="color: #cea2ca;">"sy"</span> 'wsl-copy-region-to-clipboard <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#23558;wsl&#20013;emacs&#30340;&#36873;&#20013;&#21306;&#22495;&#22797;&#21046;&#21040;&#31995;&#32479;clipboard&#20013; </span>
 <span style="color: #cea2ca;">"sd"</span> 'wsl-cut-region-to-clipboard <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">&#21516;&#19978;&#65292;&#19981;&#36807;&#26159;&#21098;&#20999;</span>

 <span style="color: #cea2ca;">"si"</span> 'my-yank-image-from-win-clipboard-through-powershell <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">image &#32423;&#21035;&#30340;yank</span>

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">shell relevant</span>
 <span style="color: #cea2ca;">"sh"</span> 'shell
 <span style="color: #cea2ca;">"sc"</span> 'shell-command

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">"gd" 'evil-goto-definition</span>
 <span style="color: #cea2ca;">"gd"</span> 'xref-find-definitions-other-window

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">python debug</span>
 <span style="color: #cea2ca;">"dd"</span> 'pdb 
 <span style="color: #cea2ca;">"db"</span> 'gud-break
 <span style="color: #cea2ca;">"dr"</span> 'gud-remove
 <span style="color: #cea2ca;">"dc"</span> 'gud-cont
 <span style="color: #cea2ca;">"dn"</span> 'gud-next
 <span style="color: #cea2ca;">"ds"</span> 'gud-step
 <span style="color: #cea2ca;">"di"</span> 'gud-stepi
 <span style="color: #cea2ca;">"dp"</span> 'gud-print
 <span style="color: #cea2ca;">"de"</span> 'gud-finish

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">git relevant</span>
 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">"gs" 'git-add-commit-push-lz ;; git synroize.</span>

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">ssh connect</span>
 <span style="color: #cea2ca;">"41"</span> 'ssh-connect-41
 <span style="color: #cea2ca;">"42"</span> 'ssh-connect-42
 <span style="color: #cea2ca;">"45"</span> 'ssh-connect-45

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">manager for english query.</span>
 <span style="color: #cea2ca;">"cy"</span> 'youdao-dictionary
 <span style="color: #cea2ca;">"te"</span> 'toggle-company-english-helper

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">manager for other frequency.</span>
 <span style="color: #cea2ca;">"ac"</span> 'ispell-buffer
 <span style="color: #cea2ca;">"fs"</span> 'flyspell-mode

 <span style="color: #635C4A;">;; </span><span style="color: #635C4A;">for orgmode application</span>
 <span style="color: #cea2ca;">"ii"</span> 'my-screen-capture
 <span style="color: #cea2ca;">"ih"</span> 'fastinsert-org-head
 <span style="color: #cea2ca;">"ic"</span> 'org-insert-src-block

</pre>
</div>



<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">key</th>
<th scope="col" class="org-left">info</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">C-c y</td>
<td class="org-left">youdao-dictionary</td>
</tr>

<tr>
<td class="org-left">C-c p</td>
<td class="org-left">projectile-command-map</td>
</tr>

<tr>
<td class="org-left">C-c e</td>
<td class="org-left">english helper</td>
</tr>

<tr>
<td class="org-left">C-\\</td>
<td class="org-left">comment-line</td>
</tr>

<tr>
<td class="org-left">M-0 M-9</td>
<td class="org-left">window switch</td>
</tr>

<tr>
<td class="org-left">ESC, C-d</td>
<td class="org-left">EVIL ESC</td>
</tr>

<tr>
<td class="org-left">&lt;SPC&gt;</td>
<td class="org-left">EVIL LEADER</td>
</tr>

<tr>
<td class="org-left">C-s</td>
<td class="org-left">search files</td>
</tr>

<tr>
<td class="org-left">C-c C-r</td>
<td class="org-left">rebegin after break</td>
</tr>

<tr>
<td class="org-left">C-h f</td>
<td class="org-left">help of function</td>
</tr>

<tr>
<td class="org-left">C-h v</td>
<td class="org-left">help of variable</td>
</tr>

<tr>
<td class="org-left">C-x C-r</td>
<td class="org-left">recent open file</td>
</tr>

<tr>
<td class="org-left">C-h C-k</td>
<td class="org-left">find function on key</td>
</tr>

<tr>
<td class="org-left">C-0,-,=</td>
<td class="org-left">screen big,small and so on</td>
</tr>

<tr>
<td class="org-left">ac</td>
<td class="org-left">aspell check buffer</td>
</tr>

<tr>
<td class="org-left">fs</td>
<td class="org-left">flyspell</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orga2abe1e" class="outline-3">
<h3 id="orga2abe1e"><span class="section-number-3">3.2.</span> snippets</h3>
<div class="outline-text-3" id="text-3-2">
<p>
太多了，还是我自己去看并。在snippets目录下。。。
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
如果对git不理解，可以参考<a href="pro-get-reading.html">this article</a>.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="date">Date: Mon Jan  3 20:36:40 2022</p>
<p class="author">Author: Zi Liang</p>
<p class="date">Created: 2023-01-02 一 17:32</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
